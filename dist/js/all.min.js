!function(){"use strict";var o=angular.module("photoFeedControllers",["ngSanitize","infinite-scroll"]);o.controller("PhotoListController",["$scope","flickrPhotosService","$timeout",function(o,t){o.infiniteBusy=!1,o.photoListData=t.getPhotos({},function(e){function n(e){o.infiniteBusy||(o.infiniteBusy=!0,r(e,!0),t.pageToLoad++)}function r(e,n){t.getPhotos({page:e},function(t){var e=t.photos.photo;o.photoList=o.photoList.concat(e),n&&(o.infiniteBusy=!1)})}if(o.photoList=e.photos.photo,t.pageToLoad>2)for(var i=2;i<t.pageToLoad;i++)r(i,!1);o.nextPage=function(){t.pageToLoad<e.photos.pages&&n(t.pageToLoad)}})}]),o.controller("PhotoDetailsController",["$scope","$routeParams","$sce","flickrPhotosService","$timeout",function(o,t,e,n,r){o.photoDetailsData=n.getPhotoById(t.photoId,function(t){var n=t.photo.description._content,r=t.photo.owner.nsid,i=t.photo.owner.username,s='<a target=_blank href="https://www.flickr.com/people/'+r+'">'+i+"</a> posted a photo";o.PhotoDescription=e.trustAsHtml(n||s)}),r(function(){picturefill()},1e3)}])}(),function(){"use strict";var o=angular.module("photoFeedApp",["ngRoute","photoFeedControllers","photoFeedServices"]);o.config(["$routeProvider",function(o){o.when("/photos",{templateUrl:"views/photo-list.html",controller:"PhotoListController"}).when("/photos/:photoId",{templateUrl:"views/photo-details.html",controller:"PhotoDetailsController"}).otherwise({redirectTo:"/photos"})}])}(),function(){"use strict";var o=angular.module("photoFeedServices",["ngResource"]);o.factory("flickrPhotosService",["$resource",function(o){var t={},e="https://api.flickr.com/services/rest/",n="4e5708f9ab5d15dfb115bcd109c21743",r=o(e,{method:"flickr.photos.search",api_key:n,tag_mode:"all",per_page:"20",extras:"date_upload,owner_name",tags:"sunset",format:"json",nojsoncallback:"1"},{get:{method:"GET",cache:!0}}),i=o(e,{method:"flickr.photos.getInfo",api_key:n,format:"json",nojsoncallback:"1"},{get:{method:"GET",cache:!0}});return t.pageToLoad=2,t.getPhotos=function(o,t){return r.get(o,t)},t.getPhotoById=function(o,t){return i.get({photo_id:o},t)},t}])}();